<head>
  <%= stylesheet_link_tag "custom", "data-turbo-track": "reload" %>
  <style>
    body {
    background-color: #f5f5f9;
    }
  </style>
</head>
<div class="container mt-5 ">
  <div class="row ">
    <div class="col-lg-3"></div>
    <div class="col-lg-6">
      <div class="shadow-sm p-5 mb-4 bg-white rounded ">
        <%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
          <div class="field form-group">
            <%= f.label :first_name , class:"fw-custom-email-pass" %>
            <%= f.text_field :first_name, autofocus: true , class:"form-control  " %>
            <% if @user.errors[:first_name].any? %>
              <div class="text-danger">
                <%= @user.errors[:first_name].first %>
              </div>
            <% end %>
          </div>
          <div class="field form-group">
            <%= f.label :last_name , class:"fw-custom-email-pass mt-3" %>
            <%= f.text_field :last_name, autofocus: true , class:"form-control" %>
            <% if @user.errors[:last_name].any? %>
              <div class="text-danger">
                <%= @user.errors[:last_name].first %>
              </div>
            <% end %>
          </div>
          <div class="field form-group">
            <%= f.label :email , class:"fw-custom-email-pass mt-3" %>
            <%= f.email_field :email, autofocus: true, autocomplete: "email" , class:"form-control " , placeholder:"user@example.com" %>
            <% if @user.errors[:email].any? %>
              <div class="text-danger">
                <%= @user.errors[:email].first %>
              </div>
            <% end %>
          </div>
          <div class="field form-group">
            <%= f.label :contact_number , class:"fw-custom-email-pass mt-3" %>
            <%= f.text_field :contact_number, autofocus: true , class:"form-control" , placeholder:"+920123456789" %>
            <% if @user.errors[:contact_number].any? %>
              <div class="text-danger">
                <%= @user.errors[:contact_number].first %>
              </div>
            <% end %>
          </div>
          <div class="field form-group">
            <%= f.label :password , class:"fw-custom-email-pass mt-3" %>
            <%= f.password_field :password, autocomplete: "new-password" , class:"form-control" , id:"password" , placeholder:"At least 6 characters" %>
            <% if @user.errors[:password].any? %>
              <div class="text-danger">
                <%= @user.errors[:password].first %>
              </div>
            <% end %>
          </div>
          <div class="progress mt-3">
            <div class="progress-bar" role="progressbar"  >
            </div>
          </div>
          <div class="field form-group">
            <%= f.label :password_confirmation , class:"fw-custom-email-pass mt-3" %>
            <%= f.password_field :password_confirmation, autocomplete: "new-password" , class:"form-control "%>
            <% if @user.errors[:password_confirmation].any? %>
              <div class="text-danger">
                <%= @user.errors[:password_confirmation].first %>
              </div>
            <% end %>
          </div>
          <div class="field  ">
            <div class="row">
              <div class="col-1 pr-custom ">
                <div class="form-group">
                  <%= f.check_box :terms_and_conditions ,class:"checkbox-size mt-3" %>
                </div>
              </div>
              <div class="col-11 pl-custom">
                <div class="form-group mt-2  ">
                  I agree to <%= link_to "terms & conditions" , terms_condition_path , target: "_blank" , class:"privacy-policy " %>
                </div>
              </div>
            </div>
            <% if @user.errors[:terms_and_conditions].any? %>
              <div class="text-danger">
                <%= @user.errors[:terms_and_conditions].first %>
              </div>
            <% end %>
          </div>
          <div class="actions">
            <%= f.submit "Sign up" , class:"form-control clr-log mt-3 " %>
          </div>
        <% end %>
      </div>
      <div class="row ">
        <div class="col-md-4"></div>
        <div class="col-md-4  Signup-member-note">
          Already registered? <%= link_to "Sign in" ,  new_user_session_path , class:"reg-design" %> instead
        </div>
        <div class="col-md-4"></div>
      </div>
    </div>
  </div>
</div>
<script>
  //progress bar
  let password = document.getElementById("password");
  let progress_bar = document.querySelector(".progress-bar");
  password.oninput = () => {
  progressBar(password.value);

  };

  function progressBar(password) {
    let strength = 0;

    if (password.match(/(?=.*[A-Z])([/\S/])/))strength++;
    if (password.match(/(?=.{6,})([/\S/])/))strength++;
    if (password.match(/(?=.*[a-z])([/\S/])/))strength++;
    if (password.match(/(?=.*[!@#$%^&])([/\S/])/))strength++;

    switch (strength) {
  case 0:
    progress_bar.style = "width: 0%; background-color:unset";
    break;
  case 1:
    progress_bar.style = "width: 20%; background-color:brown";
    break;
  case 2:
    progress_bar.style = "width: 40%; background-color:orangered";
    break;
  case 3:
    progress_bar.style = "width: 60%; background-color:gold";
    break;
  case 4:
    progress_bar.style = "width: 100%; background-color:green";
    break;

    }
  }
</script>
